(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),r=t(7),o=t(3),u=t(2),i=t(4),l=t.n(i),s="/api/persons",d=function(){return l.a.get(s).then((function(e){return e.data}))},j=function(e){return l.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},m=(t(40),t(0)),h=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:"error",children:n})},O=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:"notification",children:n})},p=function(e){var n=e.person,t=e.onDeletePerson;return Object(m.jsxs)("div",{children:[n.name,"  ",n.number," ",Object(m.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},v=function(e){var n=e.shownPeople,t=e.onDeletePerson;return Object(m.jsx)("div",{children:n.map((function(e){return Object(m.jsx)(p,{person:e,onDeletePerson:t},e.id)}))})},x=function(e){var n=e.filterName,t=e.onFilterNameChange;return Object(m.jsxs)("div",{children:["filter names ",Object(m.jsx)("input",{value:n,onChange:t})]})},g=function(e){var n=e.newName,t=e.onNameChange,c=e.newNumber,a=e.onNumberChange,r=e.onAddName;return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:r,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:t})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{type:"tel",value:c,onChange:a})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})})},N=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),i=Object(o.a)(a,2),l=i[0],s=i[1],p=Object(u.useState)(""),N=Object(o.a)(p,2),w=N[0],C=N[1],S=Object(u.useState)(""),y=Object(o.a)(S,2),P=y[0],k=y[1],D=Object(u.useState)(null),E=Object(o.a)(D,2),T=E[0],A=E[1],F=Object(u.useState)(null),J=Object(o.a)(F,2),L=J[0],B=J[1],I=Object(u.useState)(null),q=Object(o.a)(I,2),z=q[0],G=q[1],H=Object(u.useState)(null),K=Object(o.a)(H,2),M=K[0],Q=K[1];function R(e){B(e),null!==M&&(clearTimeout(M),Q(null)),Q(setTimeout((function(){B(null),Q(null)}),3e3))}function U(e){A(e),null!==z&&(clearTimeout(z),G(null)),G(setTimeout((function(){A(null),G(null)}),3e3))}Object(u.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var V=""===P?t:t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return Object(m.jsxs)("div",{children:[Object(m.jsx)(h,{message:L}),Object(m.jsx)(O,{message:T}),Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(g,{newName:l,onNameChange:function(e){s(e.target.value)},newNumber:w,onNumberChange:function(e){C(e.target.value)},onAddName:function(e){e.preventDefault();var n={name:l,number:w},a=t.find((function(e){return e.name===n.name}));if(void 0!==a){var o=Object(r.a)(Object(r.a)({},a),{},{number:w});b(a.id,o).then((function(e){c(t.map((function(n){return n.id===e.id?e:n}))),U("Successfully updated ".concat(e.name,"!")),s(""),C("")})).catch((function(e){R("Error while updating info of ".concat(n.name,"! ").concat(e.response.data.error))}))}else j(n).then((function(e){c(t.concat(e)),U("Successfully added ".concat(e.name,"!")),s(""),C("")})).catch((function(e){R("Error while adding ".concat(n.name,"! ").concat(e.response.data.error))}))}}),Object(m.jsx)(x,{filterName:P,onFilterNameChange:function(e){k(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(v,{shownPeople:V,onDeletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&f(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id}))),U("Successfully deleted ".concat(e.name,"!"))})).catch((function(n){c(t.filter((function(n){return n.id!==e.id}))),R("Cannot delete ".concat(e.name,", it's probably already deleted! ").concat(n.response.data.error))}))}})]})};a.a.render(Object(m.jsx)(N,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3d05cec4.chunk.js.map