{"version":3,"sources":["backend.js","App.js","index.js"],"names":["backendUrl","axios","get","then","response","data","newPerson","post","id","updatedPerson","put","delete","Error","message","className","Notification","DisplayPerson","person","onDeletePerson","name","number","onClick","DisplayPhoneBook","shownPeople","map","Filter","filterName","onFilterNameChange","value","onChange","PhonebookForm","newName","onNameChange","newNumber","onNumberChange","onAddName","onSubmit","type","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilterName","notification","setNotification","errorMessage","setNewErrorMessage","notificationTimeout","setNotificationTimeout","errorTimeout","setErrorTimeout","addError","clearTimeout","setTimeout","addNotification","useEffect","backend","filter","toLowerCase","includes","event","target","preventDefault","foundPerson","find","p","undefined","catch","error","concat","window","confirm","result","ReactDOM","render","document","getElementById"],"mappings":"6LACMA,EAAa,eAkBJ,EAhBA,WACX,OAAOC,IAAMC,IAAIF,GAAYG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAe5C,EAZA,SAACC,GACZ,OAAOL,IAAMM,KAAKP,EAAYM,GAAWH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAWxD,EARA,SAACG,EAAIC,GAChB,OAAOR,IAAMS,IAAN,UAAaV,EAAb,YAA2BQ,GAAMC,GAAeN,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAOtE,EAJH,SAACG,GACT,OAAOP,IAAMU,OAAN,UAAgBX,EAAhB,YAA8BQ,IAAML,MAAK,SAAAC,GAAQ,OAAIA,EAASC,S,eCZnEO,EAAQ,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACb,OAAgB,OAAZA,EACO,KAIP,qBAAKC,UAAU,QAAf,SACKD,KAKPE,EAAe,SAAC,GAAiB,IAAfF,EAAc,EAAdA,QACpB,OAAgB,OAAZA,EACO,KAIP,qBAAKC,UAAU,eAAf,SACKD,KAKPG,EAAgB,SAAC,GACtB,IADwBC,EACzB,EADyBA,OAAQC,EACjC,EADiCA,eAE7B,OACI,gCACKD,EAAOE,KADZ,KACoBF,EAAOG,OAD3B,IACmC,wBAAQC,QAAS,kBAAMH,EAAeD,IAAtC,wBAKrCK,EAAmB,SAAC,GACzB,IAD2BC,EAC5B,EAD4BA,YAAaL,EACzC,EADyCA,eAErC,OACI,8BACKK,EAAYC,KAAI,SAAAP,GAAM,OAAI,cAAC,EAAD,CAAeA,OAAQA,EAAwBC,eAAgBA,GAA3BD,EAAOT,UAK5EiB,EAAS,SAAC,GACf,IADiBC,EAClB,EADkBA,WAAYC,EAC9B,EAD8BA,mBAE1B,OACI,gDACiB,uBAAOC,MAAOF,EAAYG,SAAUF,QAKvDG,EAAgB,SAAC,GACtB,IADwBC,EACzB,EADyBA,QAASC,EAClC,EADkCA,aAAcC,EAChD,EADgDA,UAAWC,EAC3D,EAD2DA,eAAgBC,EAC3E,EAD2EA,UAEvE,OACI,8BACI,uBAAMC,SAAUD,EAAhB,UACI,yCACU,uBAAOP,MAAOG,EAASF,SAAUG,OAE3C,2CACY,uBAAOK,KAAK,MAAMT,MAAOK,EAAWJ,SAAUK,OAE1D,8BACI,wBAAQG,KAAK,SAAb,yBAmJLC,EA5IH,WACR,MAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA8BF,mBAAS,IAAvC,mBAAOR,EAAP,KAAgBW,EAAhB,KACA,EAAkCH,mBAAS,IAA3C,mBAAON,EAAP,KAAkBU,EAAlB,KACA,EAAuCJ,mBAAS,IAAhD,mBAAOb,EAAP,KAAmBkB,EAAnB,KACA,EAAwCL,mBAAS,MAAjD,mBAAOM,EAAP,KAAqBC,EAArB,KACA,EAA2CP,mBAAS,MAApD,mBAAOQ,EAAP,KAAqBC,EAArB,KACA,EAAsDT,mBAAS,MAA/D,mBAAOU,EAAP,KAA4BC,EAA5B,KACA,EAAwCX,mBAAS,MAAjD,mBAAOY,EAAP,KAAqBC,EAArB,KAQA,SAASC,EAASxC,GAEdmC,EAAmBnC,GAEE,OAAjBsC,IAEAG,aAAaH,GACbC,EAAgB,OAGpBA,EAAgBG,YAAW,WACvBP,EAAmB,MACnBI,EAAgB,QACjB,MAGP,SAASI,EAAgB3C,GAErBiC,EAAgBjC,GAEY,OAAxBoC,IAEAK,aAAaL,GACbC,EAAuB,OAG3BA,EAAuBK,YAAW,WAC9BT,EAAgB,MAChBI,EAAuB,QACxB,MAnCPO,qBAAU,WACNC,IAAiBvD,MAAK,SAAAqC,GAClBC,EAAWD,QAEhB,IAuGH,IAAMjB,EACa,KAAfG,EACAc,EACAA,EAAQmB,QAAO,SAAA1C,GAAM,OAAIA,EAAOE,KAAKyC,cAAcC,SAASnC,EAAWkC,kBAE3E,OACI,gCACI,cAAC,EAAD,CAAO/C,QAASkC,IAChB,cAAC,EAAD,CAAclC,QAASgC,IACvB,2CACA,cAAC,EAAD,CAAed,QAASA,EAASC,aApBzC,SAAsB8B,GAElBpB,EAAWoB,EAAMC,OAAOnC,QAmBLK,UAAWA,EAAWC,eAhB7C,SAAwB4B,GAEpBnB,EAAamB,EAAMC,OAAOnC,QAePO,UAjFvB,SAAmB2B,GAEfA,EAAME,iBAEN,IAAM/C,EAAS,CACXE,KAAMY,EACNX,OAAQa,GAENgC,EAAczB,EAAQ0B,MAAK,SAAAC,GAAC,OAAIA,EAAEhD,OAASF,EAAOE,QAExD,QAAoBiD,IAAhBH,EACJ,CACI,IAAM3D,EAAS,2BAAO2D,GAAP,IAAoB7C,OAAQa,IAC3CyB,EAAeO,EAAYzD,GAAIF,GAAWH,MAAK,SAAAG,GAC3CmC,EAAWD,EAAQhB,KAAI,SAAA2C,GAAC,OAAIA,EAAE3D,KAAOF,EAAUE,GAAKF,EAAY6D,MAChEX,EAAgB,wBAAD,OAAyBlD,EAAUa,KAAnC,MAEfuB,EAAW,IACXC,EAAa,OAEhB0B,OAAM,SAAAC,GACHjB,EAAS,gCAAD,OAAiCpC,EAAOE,KAAxC,aAAiDmD,EAAMlE,SAASC,KAAKiE,gBAKjFZ,EAAezC,GAAQd,MAAK,SAAAG,GACxBmC,EAAWD,EAAQ+B,OAAOjE,IAC1BkD,EAAgB,sBAAD,OAAuBlD,EAAUa,KAAjC,MAEfuB,EAAW,IACXC,EAAa,OAEhB0B,OAAM,SAAAC,GACHjB,EAAS,sBAAD,OAAuBpC,EAAOE,KAA9B,aAAuCmD,EAAMlE,SAASC,KAAKiE,cAiDvE,cAAC,EAAD,CAAQ5C,WAAYA,EAAYC,mBA7BxC,SAA4BmC,GAExBlB,EAAiBkB,EAAMC,OAAOnC,UA6B1B,yCAEA,cAAC,EAAD,CAAkBL,YAAaA,EAAaL,eAhDpD,SAAwBD,GAEhBuD,OAAOC,QAAP,iBAAyBxD,EAAOE,KAAhC,OAEAuC,EAAYzC,EAAOT,IAAIL,MAAK,SAAAuE,GACxBjC,EAAWD,EAAQmB,QAAO,SAAAQ,GAAC,OAAIA,EAAE3D,KAAOS,EAAOT,OAC/CgD,EAAgB,wBAAD,OAAyBvC,EAAOE,KAAhC,SAElBkD,OAAM,SAAAC,GACH7B,EAAWD,EAAQmB,QAAO,SAAAQ,GAAC,OAAIA,EAAE3D,KAAOS,EAAOT,OAC/C6C,EAAS,iBAAD,OAAkBpC,EAAOE,KAAzB,4CAAiEmD,EAAMlE,SAASC,KAAKiE,kBCxK7GK,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.3d05cec4.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst backendUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(backendUrl).then(response => response.data);\r\n}\r\n\r\nconst create = (newPerson) => {\r\n    return axios.post(backendUrl, newPerson).then(response => response.data);\r\n}\r\n\r\nconst update = (id, updatedPerson) => {\r\n    return axios.put(`${backendUrl}/${id}`, updatedPerson).then(response => response.data);\r\n}\r\n\r\nconst del = (id) => {\r\n    return axios.delete(`${backendUrl}/${id}`).then(response => response.data);\r\n}\r\n\r\nexport default { getAll, create, update, del }","import React, { useEffect, useState } from 'react'\nimport backend from './backend.js';\nimport './App.css';\n\nconst Error = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n  \n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n  \n    return (\n        <div className=\"notification\">\n            {message}\n        </div>\n    )\n}\n\nconst DisplayPerson = ({ person, onDeletePerson }) =>\n{\n    return (\n        <div>\n            {person.name}  {person.number} <button onClick={() => onDeletePerson(person)}>delete</button>\n        </div>\n    )\n}\n\nconst DisplayPhoneBook = ({ shownPeople, onDeletePerson }) => \n{\n    return (\n        <div>\n            {shownPeople.map(person => <DisplayPerson person={person} key={person.id} onDeletePerson={onDeletePerson} />)}\n        </div>\n    )\n}\n\nconst Filter = ({ filterName, onFilterNameChange }) => \n{\n    return (\n        <div>\n            filter names <input value={filterName} onChange={onFilterNameChange} />\n        </div>\n    )\n}\n\nconst PhonebookForm = ({ newName, onNameChange, newNumber, onNumberChange, onAddName }) => \n{\n    return (\n        <div>\n            <form onSubmit={onAddName}>\n                <div>\n                    name: <input value={newName} onChange={onNameChange} />\n                </div>\n                <div>\n                    number: <input type=\"tel\" value={newNumber} onChange={onNumberChange} />\n                </div>\n                <div>\n                    <button type=\"submit\">add</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [filterName, setNewFilterName] = useState('');\n    const [notification, setNotification] = useState(null);\n    const [errorMessage, setNewErrorMessage] = useState(null);\n    const [notificationTimeout, setNotificationTimeout] = useState(null);\n    const [errorTimeout, setErrorTimeout] = useState(null);\n\n    useEffect(() => {\n        backend.getAll().then(persons => {\n            setPersons(persons);\n        });\n    }, []);\n\n    function addError(message)\n    {\n        setNewErrorMessage(message);\n\n        if (errorTimeout !== null) \n        {\n            clearTimeout(errorTimeout);\n            setErrorTimeout(null);\n        }\n\n        setErrorTimeout(setTimeout(() => {\n            setNewErrorMessage(null);\n            setErrorTimeout(null);\n        }, 3000));\n    }\n\n    function addNotification(message)\n    {\n        setNotification(message);\n\n        if (notificationTimeout !== null) \n        {\n            clearTimeout(notificationTimeout);\n            setNotificationTimeout(null);\n        }\n\n        setNotificationTimeout(setTimeout(() => {\n            setNotification(null);\n            setNotificationTimeout(null);\n        }, 3000));\n    }\n\n    function onAddName(event)\n    {\n        event.preventDefault();\n\n        const person = {\n            name: newName,\n            number: newNumber\n        };\n        const foundPerson = persons.find(p => p.name === person.name);\n\n        if (foundPerson !== undefined)\n        {\n            const newPerson = {...foundPerson, number: newNumber};\n            backend.update(foundPerson.id, newPerson).then(newPerson => {\n                setPersons(persons.map(p => p.id === newPerson.id ? newPerson : p));\n                addNotification(`Successfully updated ${newPerson.name}!`);\n\n                setNewName('');\n                setNewNumber('');\n            })\n            .catch(error => {\n                addError(`Error while updating info of ${person.name}! ${error.response.data.error}`);\n            });\n        }\n        else\n        {\n            backend.create(person).then(newPerson => {\n                setPersons(persons.concat(newPerson));\n                addNotification(`Successfully added ${newPerson.name}!`);\n\n                setNewName('');\n                setNewNumber('');\n            })\n            .catch(error => {\n                addError(`Error while adding ${person.name}! ${error.response.data.error}`);\n            });\n        }\n    }\n\n    function onDeletePerson(person)\n    {\n        if (window.confirm(`Delete ${person.name}?`))\n        {\n            backend.del(person.id).then(result => {\n                setPersons(persons.filter(p => p.id !== person.id));\n                addNotification(`Successfully deleted ${person.name}!`);\n            })\n            .catch(error => {\n                setPersons(persons.filter(p => p.id !== person.id));\n                addError(`Cannot delete ${person.name}, it's probably already deleted! ${error.response.data.error}`);\n            });\n        }\n    }\n    \n    function onFilterNameChange(event)\n    {\n        setNewFilterName(event.target.value);\n    }\n    \n    function onNameChange(event)\n    {\n        setNewName(event.target.value);\n    }\n\n    function onNumberChange(event)\n    {\n        setNewNumber(event.target.value);\n    }\n\n    const shownPeople = \n        filterName === '' ? \n        persons : \n        persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase()));\n\n    return (\n        <div>\n            <Error message={errorMessage} />\n            <Notification message={notification} />\n            <h2>Phonebook</h2>\n            <PhonebookForm newName={newName} onNameChange={onNameChange} \n                           newNumber={newNumber} onNumberChange={onNumberChange} \n                           onAddName={onAddName} />\n\n            <Filter filterName={filterName} onFilterNameChange={onFilterNameChange} />\n\n            <h2>Numbers</h2>\n\n            <DisplayPhoneBook shownPeople={shownPeople} onDeletePerson={onDeletePerson} />\n        </div>\n    )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)\n"],"sourceRoot":""}